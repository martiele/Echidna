<?php
namespace applications\api;


use applications\api\entities\Api;
use applications\api\entities\ApiToken;
use applications\banner\entities\Banner;
use applications\banner\BannerBackend;
use applications\pages\entities\Pagina;
use backend\Menu;
use core\abstracts\Application;
use core\Config;
use core\Model;
use core\services\Response;
use core\services\RouterService;

class ApiApplication extends Application {

    static function init($n)
    {
        parent::init($n); // TODO: Change the autogenerated stub

        $t = Response::getFrontendTemplate();



        RouterService::addRoutesPrefixed(ApiTokensBackend::declareRoutes() ,"/backend/apitokens/");

        $menu = new Menu("Api",self::getBackendApplication()::getIcon());
        $menu->addItem("Lista",RouterService::getRoute(Api::getEntity().".list"));
        $menu->addItem("Aggiungi",RouterService::getRoute(Api::getEntity().".add"));
        $menu->addItem("Gestisci token",RouterService::getRoute(ApiToken::getEntity().".list"));

        $backend = Response::getBackendTemplate();
        $backend::addMenu($menu);



    }

    static function getFrontendApplication()
    {
        // TODO: Implement getFrontendApplication() method.
        return ApiFrontend::class;
    }

    static function getBackendApplication()
    {
        // TODO: Implement getBackendApplication() method.
        return ApiBackend::class;
    }

    static function getEntityClass()
    {
        return Api::class;
    }

    static function install()
    {
        return [
            ApiToken::class
        ];
    }


}