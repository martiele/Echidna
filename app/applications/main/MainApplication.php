<?php
namespace applications\main;


use applications\login\entities\RolePermission;
use applications\main\entities\Notification;
use applications\main\entities\Widget;
use applications\meta\entities\Meta;
use applications\pages\entities\Pagina;
use core\abstracts\Application;
use core\abstracts\FrontendApplication;
use core\Model;
use core\services\Response;
use core\services\RouterService;

class MainApplication extends Application {
    static function init($n)
    {
        parent::init($n); // TODO: Change the autogenerated stub

        RolePermission::$permissions[] = "backend.widgets.edit";

        Response::addVariable([
            "notifications" => Notification::query()->setOrderBy("readed","DESC")->getAll()
        ]);


        RouterService::addRoutesPrefixed(NotificationsApplication::declareRoutes(),"backend/notifiche/");


        RolePermission::$permissions[] = "environment.prod.access";
        RolePermission::$permissions[] = "environment.demo.access";


    }



    static function getFrontendApplication()
    {
        return null;
    }


    static function getBackendApplication()
    {
        // TODO: Implement getBackendApplication() method.
        return MainBackend::class;
    }

    static function getEntityClass()
    {
        return Widget::class;
    }

    static function install()
    {


        return [
            Widget::class,
            Notification::class
        ];
    }


}